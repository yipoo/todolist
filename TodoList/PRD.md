# TodoList é¡¹ç›®éœ€æ±‚æ–‡æ¡£ (PRD)

## é¡¹ç›®æ¦‚è¿°

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å¾…åŠäº‹é¡¹ç®¡ç†åº”ç”¨ï¼Œæ”¯æŒæœ¬åœ°æ•°æ®å­˜å‚¨ã€ç”¨æˆ·è®¤è¯ã€æ—¥å†è§†å›¾ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

**æŠ€æœ¯æ ˆï¼š**
- SwiftUI (iOS 17+)
- SwiftData (æœ¬åœ°æ•°æ®æŒä¹…åŒ–)
- KeychainAccess (å®‰å…¨å­˜å‚¨ç”¨æˆ·å‡­è¯)
- é¢„ç•™ç¬¬ä¸‰æ–¹ç™»å½•æ¥å£

---

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

#### 1.1 ç™»å½•åŠŸèƒ½
**åŠŸèƒ½æè¿°ï¼š**
- ç”¨æˆ·å¯ä»¥ä½¿ç”¨é‚®ç®±/ç”¨æˆ·å + å¯†ç ç™»å½•
- æ”¯æŒ"è®°ä½æˆ‘"åŠŸèƒ½ï¼ˆä¿æŒç™»å½•çŠ¶æ€ï¼‰
- ç™»å½•å¤±è´¥æ˜¾ç¤ºé”™è¯¯æç¤º

**ç•Œé¢è¦ç´ ï¼š**
- åº”ç”¨ Logo/æ ‡é¢˜
- é‚®ç®±/ç”¨æˆ·åè¾“å…¥æ¡†
- å¯†ç è¾“å…¥æ¡†ï¼ˆæ”¯æŒæ˜¾ç¤º/éšè—ï¼‰
- "è®°ä½æˆ‘" Toggle
- ç™»å½•æŒ‰é’®
- "å¿˜è®°å¯†ç "é“¾æ¥ï¼ˆé¢„ç•™ï¼‰
- "è¿˜æ²¡æœ‰è´¦å·ï¼Ÿæ³¨å†Œ"é“¾æ¥
- ç¬¬ä¸‰æ–¹ç™»å½•åŒºåŸŸï¼ˆé¢„ç•™å¾®ä¿¡ç™»å½•ï¼‰

**éªŒè¯è§„åˆ™ï¼š**
- é‚®ç®±æ ¼å¼éªŒè¯
- å¯†ç ä¸èƒ½ä¸ºç©º
- å¯†ç æœ€å°‘ 6 ä½

**æ•°æ®æµï¼š**
```
è¾“å…¥å‡­è¯ â†’ æœ¬åœ°æ•°æ®åº“æŸ¥è¯¢ â†’ éªŒè¯æˆåŠŸ â†’ ä¿å­˜ç™»å½•çŠ¶æ€ â†’ è¿›å…¥ä¸»ç•Œé¢
         â†“
      éªŒè¯å¤±è´¥ â†’ æ˜¾ç¤ºé”™è¯¯æç¤º
```

#### 1.2 æ³¨å†ŒåŠŸèƒ½
**åŠŸèƒ½æè¿°ï¼š**
- ç”¨æˆ·å¯ä»¥åˆ›å»ºæ–°è´¦å·
- é‚®ç®±å”¯ä¸€æ€§éªŒè¯
- å¯†ç å¼ºåº¦æç¤º

**ç•Œé¢è¦ç´ ï¼š**
- ç”¨æˆ·åè¾“å…¥æ¡†
- é‚®ç®±è¾“å…¥æ¡†
- å¯†ç è¾“å…¥æ¡†ï¼ˆæ”¯æŒæ˜¾ç¤º/éšè—ï¼‰
- ç¡®è®¤å¯†ç è¾“å…¥æ¡†
- å¯†ç å¼ºåº¦æŒ‡ç¤ºå™¨
- åŒæ„æœåŠ¡æ¡æ¬¾ Toggle
- æ³¨å†ŒæŒ‰é’®
- "å·²æœ‰è´¦å·ï¼Ÿç™»å½•"é“¾æ¥

**éªŒè¯è§„åˆ™ï¼š**
- ç”¨æˆ·åï¼š3-20ä¸ªå­—ç¬¦ï¼Œå­—æ¯æ•°å­—ä¸‹åˆ’çº¿
- é‚®ç®±ï¼šæœ‰æ•ˆçš„é‚®ç®±æ ¼å¼
- å¯†ç ï¼šæœ€å°‘ 8 ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—
- ç¡®è®¤å¯†ç ï¼šå¿…é¡»ä¸å¯†ç ä¸€è‡´
- å¿…é¡»åŒæ„æœåŠ¡æ¡æ¬¾

**æ•°æ®æµï¼š**
```
è¾“å…¥ä¿¡æ¯ â†’ è¡¨å•éªŒè¯ â†’ æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨ â†’ åˆ›å»ºç”¨æˆ· â†’ è‡ªåŠ¨ç™»å½• â†’ è¿›å…¥ä¸»ç•Œé¢
         â†“
      éªŒè¯å¤±è´¥ â†’ æ˜¾ç¤ºé”™è¯¯æç¤º
```

#### 1.3 ç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆé¢„ç•™ï¼‰
**æ”¯æŒå¹³å°ï¼š**
- å¾®ä¿¡ç™»å½•ï¼ˆé¢„ç•™æ¥å£ï¼‰
- Apple ID ç™»å½•ï¼ˆæ¨èï¼ŒiOS åŸç”Ÿæ”¯æŒï¼‰

**ç•Œé¢ï¼š**
- ç¬¬ä¸‰æ–¹ç™»å½•æŒ‰é’®
- æ˜¾ç¤ºæˆæƒåè®®

**æ•°æ®ç»“æ„ï¼š**
```swift
struct ThirdPartyAuth {
    var provider: String  // "wechat", "apple"
    var openId: String
    var token: String
    var userInfo: ThirdPartyUserInfo
}
```

---

### 2. å¾…åŠäº‹é¡¹ (Todo List) åŠŸèƒ½

#### 2.1 ä¸»ç•Œé¢
**ç•Œé¢å¸ƒå±€ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â˜°] å¾…åŠäº‹é¡¹    [â‹®]    â”‚  â† é¡¶éƒ¨å¯¼èˆªæ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š ä»Šæ—¥å¾…åŠ: 3/8       â”‚  â† ç»Ÿè®¡å¡ç‰‡
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” æœç´¢å¾…åŠäº‹é¡¹...     â”‚  â† æœç´¢æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Œ åˆ†ç±»è¿‡æ»¤å™¨          â”‚  â† å¿«é€Ÿç­›é€‰
â”‚  [å…¨éƒ¨][ä»Šå¤©][é‡è¦][å·²å®Œæˆ]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜ å®Œæˆé¡¹ç›®æŠ¥å‘Š         â”‚  â† å¾…åŠåˆ—è¡¨
â”‚     ğŸ·ï¸ å·¥ä½œ | â° ä»Šå¤©  â”‚
â”‚                         â”‚
â”‚  â˜ ä¹°èœ                 â”‚
â”‚     ğŸ·ï¸ ç”Ÿæ´» | â° æ˜å¤©  â”‚
â”‚                         â”‚
â”‚  â˜‘ï¸ æ™¨è·‘ 30åˆ†é’Ÿ         â”‚
â”‚     ğŸ·ï¸ å¥åº· | â° ä»Šå¤©  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       [+] æ–°å»ºå¾…åŠ         â† æµ®åŠ¨æŒ‰é’®
```

#### 2.2 å¾…åŠäº‹é¡¹æ•°æ®æ¨¡å‹
```swift
struct TodoItem {
    var id: UUID
    var title: String              // æ ‡é¢˜
    var description: String?       // è¯¦ç»†æè¿°
    var isCompleted: Bool          // å®ŒæˆçŠ¶æ€
    var priority: Priority         // ä¼˜å…ˆçº§ï¼šé«˜/ä¸­/ä½
    var category: Category         // åˆ†ç±»
    var dueDate: Date?            // æˆªæ­¢æ—¥æœŸ
    var reminderTime: Date?       // æé†’æ—¶é—´
    var tags: [String]            // æ ‡ç­¾
    var subtasks: [Subtask]       // å­ä»»åŠ¡
    var createdAt: Date           // åˆ›å»ºæ—¶é—´
    var updatedAt: Date           // æ›´æ–°æ—¶é—´
    var userId: UUID              // æ‰€å±ç”¨æˆ·
}

enum Priority: String {
    case high = "é«˜"
    case medium = "ä¸­"
    case low = "ä½"
}

struct Category {
    var id: UUID
    var name: String
    var icon: String
    var color: String
}

struct Subtask {
    var id: UUID
    var title: String
    var isCompleted: Bool
}
```

#### 2.3 æ ¸å¿ƒåŠŸèƒ½

**åˆ›å»ºå¾…åŠï¼š**
- å¿«é€Ÿåˆ›å»ºï¼ˆåªè¾“å…¥æ ‡é¢˜ï¼‰
- è¯¦ç»†åˆ›å»ºï¼ˆå®Œæ•´è¡¨å•ï¼‰
- æ”¯æŒæ·»åŠ å­ä»»åŠ¡
- æ”¯æŒè®¾ç½®æé†’

**ç¼–è¾‘å¾…åŠï¼š**
- ç‚¹å‡»å¾…åŠæŸ¥çœ‹è¯¦æƒ…
- å¯ç¼–è¾‘æ‰€æœ‰å­—æ®µ
- æ”¯æŒæ·»åŠ /åˆ é™¤å­ä»»åŠ¡

**åˆ é™¤å¾…åŠï¼š**
- å·¦æ»‘åˆ é™¤
- è¯¦æƒ…é¡µåˆ é™¤æŒ‰é’®
- åˆ é™¤ç¡®è®¤å¼¹çª—

**å®Œæˆ/æœªå®Œæˆåˆ‡æ¢ï¼š**
- ç‚¹å‡»å¤é€‰æ¡†å¿«é€Ÿåˆ‡æ¢
- å®Œæˆåæ˜¾ç¤ºåˆ’çº¿æ•ˆæœ
- è®°å½•å®Œæˆæ—¶é—´

**æ’åºæ–¹å¼ï¼š**
- æŒ‰åˆ›å»ºæ—¶é—´
- æŒ‰æˆªæ­¢æ—¥æœŸ
- æŒ‰ä¼˜å…ˆçº§
- æŒ‰åˆ†ç±»

**ç­›é€‰åŠŸèƒ½ï¼š**
- ä»Šå¤©ï¼ˆä»Šå¤©æˆªæ­¢çš„ï¼‰
- æ˜å¤©
- æœ¬å‘¨
- å·²å®Œæˆ
- æœªå®Œæˆ
- æŒ‰åˆ†ç±»ç­›é€‰
- æŒ‰ä¼˜å…ˆçº§ç­›é€‰

**æœç´¢åŠŸèƒ½ï¼š**
- å®æ—¶æœç´¢æ ‡é¢˜å’Œæè¿°
- æ”¯æŒæ ‡ç­¾æœç´¢

#### 2.4 åˆ†ç±»ç®¡ç†
**é¢„è®¾åˆ†ç±»ï¼š**
- ğŸ¢ å·¥ä½œ
- ğŸ  ç”Ÿæ´»
- ğŸ’ª å¥åº·
- ğŸ“š å­¦ä¹ 
- ğŸ¯ ç›®æ ‡

**è‡ªå®šä¹‰åˆ†ç±»ï¼š**
- æ·»åŠ æ–°åˆ†ç±»
- ç¼–è¾‘åˆ†ç±»åç§°å’Œå›¾æ ‡
- åˆ é™¤åˆ†ç±»ï¼ˆéœ€ç¡®è®¤ï¼‰
- ä¸ºåˆ†ç±»è®¾ç½®é¢œè‰²

---

### 3. æ—¥å†è§†å›¾åŠŸèƒ½

#### 3.1 æœˆå†è§†å›¾
**ç•Œé¢å¸ƒå±€ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¹ 2025å¹´1æœˆ â€º         â”‚  â† æœˆä»½åˆ‡æ¢
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ—¥ ä¸€ äºŒ ä¸‰ å›› äº” å…­   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     1  2  3  4  5  6    â”‚
â”‚  7  8  9 [10] 11 12 13  â”‚  â† ä»Šå¤©é«˜äº®
â”‚  14 â¦¿15 16 17 18 19 20  â”‚  â† â¦¿ è¡¨ç¤ºæœ‰å¾…åŠ
â”‚  21 22 23 24 25 26 27   â”‚
â”‚  28 29 30 31            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½ï¼š**
- æ˜¾ç¤ºå½“æœˆæ—¥å†
- ä»Šå¤©æ—¥æœŸé«˜äº®
- æœ‰å¾…åŠçš„æ—¥æœŸæ˜¾ç¤ºæ ‡è®°ç‚¹
- ç‚¹å‡»æ—¥æœŸæŸ¥çœ‹å½“å¤©å¾…åŠ
- å·¦å³æ»‘åŠ¨åˆ‡æ¢æœˆä»½

#### 3.2 æ—¥è§†å›¾
**ç‚¹å‡»æ—¥æœŸåæ˜¾ç¤ºï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2025å¹´1æœˆ10æ—¥ æ˜ŸæœŸäº”   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ ä»Šæ—¥å¾…åŠ (5)        â”‚
â”‚                         â”‚
â”‚  09:00 å›¢é˜Ÿä¼šè®®         â”‚
â”‚  11:30 åˆé¤çº¦ä¼š         â”‚
â”‚  14:00 é¡¹ç›®è¯„å®¡         â”‚
â”‚  16:00 å¥èº«             â”‚
â”‚  19:00 æ™šé¥­             â”‚
â”‚                         â”‚
â”‚  [+ æ·»åŠ å¾…åŠåˆ°ä»Šå¤©]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½ï¼š**
- æ˜¾ç¤ºå½“å¤©æ‰€æœ‰å¾…åŠï¼ˆæŒ‰æ—¶é—´æ’åºï¼‰
- æ˜¾ç¤ºå·²å®Œæˆ/æœªå®Œæˆæ•°é‡
- å¿«é€Ÿæ·»åŠ å¾…åŠåˆ°è¯¥æ—¥æœŸ

#### 3.3 å‘¨è§†å›¾ï¼ˆå¯é€‰æ‰©å±•ï¼‰
**æ¨ªå‘æ»‘åŠ¨æŸ¥çœ‹ä¸€å‘¨ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘¨ä¸€ 8  å‘¨äºŒ 9  [å‘¨ä¸‰ 10]  å‘¨å›› 11â”‚
â”‚  â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€ â”‚
â”‚  â¦¿â¦¿â¦¿   â¦¿â¦¿     â¦¿â¦¿â¦¿â¦¿    â¦¿â¦¿   â”‚
â”‚  5é¡¹     3é¡¹     6é¡¹      4é¡¹     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4. æ•°æ®æŒä¹…åŒ–

#### 4.1 æœ¬åœ°å­˜å‚¨æ–¹æ¡ˆ
**ä½¿ç”¨ SwiftDataï¼š**
- iOS 17+ åŸç”Ÿæ•°æ®æŒä¹…åŒ–æ¡†æ¶
- ç±»å‹å®‰å…¨çš„æ•°æ®æ¨¡å‹
- è‡ªåŠ¨å¤„ç†å…³ç³»å’Œè¿ç§»

**æ•°æ®æ¨¡å‹ï¼š**
```swift
@Model
class User {
    @Attribute(.unique) var id: UUID
    var username: String
    var email: String
    var passwordHash: String
    var createdAt: Date

    @Relationship(deleteRule: .cascade)
    var todos: [TodoItem]

    @Relationship(deleteRule: .cascade)
    var categories: [Category]
}

@Model
class TodoItem {
    @Attribute(.unique) var id: UUID
    var title: String
    var description: String?
    var isCompleted: Bool
    var priority: String
    var dueDate: Date?
    var reminderTime: Date?
    var tags: [String]
    var createdAt: Date
    var updatedAt: Date

    var user: User?
    var category: Category?

    @Relationship(deleteRule: .cascade)
    var subtasks: [Subtask]
}

@Model
class Category {
    @Attribute(.unique) var id: UUID
    var name: String
    var icon: String
    var color: String

    var user: User?

    @Relationship(inverse: \TodoItem.category)
    var todos: [TodoItem]
}

@Model
class Subtask {
    @Attribute(.unique) var id: UUID
    var title: String
    var isCompleted: Bool

    var todo: TodoItem?
}
```

#### 4.2 æ•æ„Ÿæ•°æ®å­˜å‚¨
**ä½¿ç”¨ Keychainï¼š**
- å­˜å‚¨ç”¨æˆ·å¯†ç ï¼ˆHashï¼‰
- å­˜å‚¨ç™»å½• Token
- å­˜å‚¨ç¬¬ä¸‰æ–¹ç™»å½•å‡­è¯

```swift
// KeychainManager
class KeychainManager {
    func savePassword(_ password: String, for username: String)
    func getPassword(for username: String) -> String?
    func deletePassword(for username: String)
    func saveLoginToken(_ token: String)
    func getLoginToken() -> String?
}
```

---

### 5. ç•ªèŒ„é’ŸåŠŸèƒ½

#### 5.1 åŠŸèƒ½æ¦‚è¿°
ç•ªèŒ„å·¥ä½œæ³•è®¡æ—¶å™¨ï¼Œå¸®åŠ©ç”¨æˆ·ä¸“æ³¨å®Œæˆä»»åŠ¡ã€‚

#### 5.2 æ ¸å¿ƒåŠŸèƒ½

**è®¡æ—¶è®¾ç½®ï¼š**
- å·¥ä½œæ—¶é•¿ï¼š25åˆ†é’Ÿï¼ˆå¯è‡ªå®šä¹‰ 15/25/30/45/60 åˆ†é’Ÿï¼‰
- çŸ­ä¼‘æ¯ï¼š5åˆ†é’Ÿï¼ˆå¯è‡ªå®šä¹‰ï¼‰
- é•¿ä¼‘æ¯ï¼š15åˆ†é’Ÿï¼ˆå¯è‡ªå®šä¹‰ï¼Œæ¯4ä¸ªç•ªèŒ„åï¼‰
- è‡ªåŠ¨åˆ‡æ¢æ¨¡å¼

**è®¡æ—¶å™¨ç•Œé¢ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ… ä¸“æ³¨æ¨¡å¼           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚
â”‚       24:35             â”‚  â† å€’è®¡æ—¶
â”‚                         â”‚
â”‚    â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹           â”‚  â† è¿›åº¦ç¯
â”‚                         â”‚
â”‚   [æš‚åœ] [æ”¾å¼ƒ]         â”‚  â† æ§åˆ¶æŒ‰é’®
â”‚                         â”‚
â”‚   å½“å‰ä»»åŠ¡ï¼šå†™é¡¹ç›®æ–‡æ¡£   â”‚  â† å…³è”çš„å¾…åŠ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³è”å¾…åŠï¼š**
- ä»å¾…åŠåˆ—è¡¨é€‰æ‹©ä»»åŠ¡å¼€å§‹ç•ªèŒ„é’Ÿ
- å®Œæˆåè‡ªåŠ¨è®°å½•åˆ°è¯¥ä»»åŠ¡
- æ˜¾ç¤ºä»»åŠ¡å·²å®Œæˆçš„ç•ªèŒ„æ•°

**ç»Ÿè®¡è®°å½•ï¼š**
- æ¯æ—¥å®Œæˆçš„ç•ªèŒ„æ•°
- æ¯å‘¨/æœˆç»Ÿè®¡
- æœ€ä¸“æ³¨çš„æ—¶é—´æ®µåˆ†æ
- ç•ªèŒ„é’Ÿå†å²è®°å½•

**é€šçŸ¥æé†’ï¼š**
- å·¥ä½œæ—¶é—´ç»“æŸæé†’
- ä¼‘æ¯æ—¶é—´ç»“æŸæé†’
- å£°éŸ³/éœ‡åŠ¨æé†’

**åå°æ”¯æŒï¼š**
- App åœ¨åå°æ—¶ç»§ç»­è®¡æ—¶
- é”å±æ˜¾ç¤ºå€’è®¡æ—¶
- æ”¯æŒ Live Activityï¼ˆiOS 16.1+ï¼‰

#### 5.3 æ•°æ®æ¨¡å‹
```swift
@Model
class PomodoroSession {
    var id: UUID
    var startTime: Date
    var endTime: Date?
    var duration: Int              // åˆ†é’Ÿæ•°
    var type: SessionType          // å·¥ä½œ/çŸ­ä¼‘æ¯/é•¿ä¼‘æ¯
    var isCompleted: Bool
    var todo: TodoItem?            // å…³è”çš„å¾…åŠ
    var userId: UUID
}

enum SessionType: String {
    case work = "å·¥ä½œ"
    case shortBreak = "çŸ­ä¼‘æ¯"
    case longBreak = "é•¿ä¼‘æ¯"
}

struct PomodoroSettings {
    var workDuration: Int = 25     // åˆ†é’Ÿ
    var shortBreakDuration: Int = 5
    var longBreakDuration: Int = 15
    var sessionsBeforeLongBreak: Int = 4
    var autoStartBreaks: Bool = false
    var autoStartPomodoros: Bool = false
}
```

---

### 6. Widget å°ç»„ä»¶

#### 6.1 å°ç»„ä»¶ç±»å‹

**å°å· Widgetï¼ˆ2x2ï¼‰ï¼š**
- æ˜¾ç¤ºä»Šæ—¥å¾…åŠæ•°é‡
- æ˜¾ç¤ºæœ€è¿‘ä¸€æ¡å¾…åŠ
- ç‚¹å‡»æ‰“å¼€åº”ç”¨

**ä¸­å· Widgetï¼ˆ4x2ï¼‰ï¼š**
- æ˜¾ç¤ºä»Šæ—¥å‰3æ¡å¾…åŠ
- æ˜¾ç¤ºå®Œæˆè¿›åº¦æ¡
- ç‚¹å‡»å¾…åŠé¡¹å¿«é€Ÿæ ‡è®°å®Œæˆ

**å¤§å· Widgetï¼ˆ4x4ï¼‰ï¼š**
- æ˜¾ç¤ºä»Šæ—¥æ‰€æœ‰å¾…åŠï¼ˆæœ€å¤š8æ¡ï¼‰
- åˆ†ç±»æ˜¾ç¤º
- æ˜¾ç¤ºç•ªèŒ„é’Ÿç»Ÿè®¡

#### 6.2 Widget åŠŸèƒ½
- å®æ—¶æ›´æ–°å¾…åŠçŠ¶æ€
- æ”¯æŒæ·±è‰²æ¨¡å¼
- æ”¯æŒå¤šä¸ªå°ç»„ä»¶å®ä¾‹
- App Intent å¿«é€Ÿæ“ä½œ

#### 6.3 æŠ€æœ¯å®ç°
```swift
// WidgetKit + App Intents
struct TodoWidget: Widget {
    var body: some WidgetConfiguration {
        StaticConfiguration(
            kind: "TodoWidget",
            provider: TodoWidgetProvider()
        ) { entry in
            TodoWidgetView(entry: entry)
        }
        .configurationDisplayName("ä»Šæ—¥å¾…åŠ")
        .description("æŸ¥çœ‹å’Œç®¡ç†ä½ çš„å¾…åŠäº‹é¡¹")
        .supportedFamilies([.systemSmall, .systemMedium, .systemLarge])
    }
}
```

---

### 7. é™„åŠ åŠŸèƒ½

#### 7.1 ç»Ÿè®¡åˆ†æ
**æ˜¾ç¤ºå†…å®¹ï¼š**
- ä»Šæ—¥å®Œæˆç‡
- æœ¬å‘¨å®Œæˆè¶‹åŠ¿å›¾
- åˆ†ç±»å æ¯”é¥¼å›¾
- è¿ç»­æ‰“å¡å¤©æ•°
- ç•ªèŒ„é’Ÿç»Ÿè®¡ï¼ˆæ¯æ—¥/æ¯å‘¨ï¼‰
- æœ€ä¸“æ³¨çš„æ—¶é—´æ®µ

#### 7.2 æé†’é€šçŸ¥
**åŠŸèƒ½ï¼š**
- åˆ°æœŸæé†’
- è‡ªå®šä¹‰æé†’æ—¶é—´
- é‡å¤æé†’è®¾ç½®
- ç•ªèŒ„é’Ÿå®Œæˆé€šçŸ¥

#### 7.3 è®¾ç½®é¡µé¢
**åŠŸèƒ½é¡¹ï¼š**
- ä¸ªäººèµ„æ–™ç¼–è¾‘
- ä¿®æ”¹å¯†ç 
- é€šçŸ¥è®¾ç½®
- ç•ªèŒ„é’Ÿè®¾ç½®
- ä¸»é¢˜è®¾ç½®ï¼ˆæµ…è‰²/æ·±è‰²ï¼‰
- Widget è®¾ç½®
- æ•°æ®å¯¼å‡º
- é€€å‡ºç™»å½•
- å…³äºåº”ç”¨

---

## ç•Œé¢å¯¼èˆªç»“æ„

```
å¯åŠ¨é¡µ
  â†“
ç™»å½•/æ³¨å†Œé¡µ â”€â”€â”€â”€â”€â†’ å¿˜è®°å¯†ç ï¼ˆé¢„ç•™ï¼‰
  â†“                 å¾®ä¿¡ç™»å½•ï¼ˆé¢„ç•™ï¼‰
ä¸»ç•Œé¢ï¼ˆTabViewï¼‰
â”œâ”€ Tab 1: å¾…åŠåˆ—è¡¨ ğŸ“
â”‚   â”œâ”€ æ–°å»ºå¾…åŠ
â”‚   â”œâ”€ ç¼–è¾‘å¾…åŠ
â”‚   â”œâ”€ å¾…åŠè¯¦æƒ…
â”‚   â””â”€ å¼€å§‹ç•ªèŒ„é’Ÿ â†’ ç•ªèŒ„é’Ÿè®¡æ—¶é¡µé¢
â”‚
â”œâ”€ Tab 2: æ—¥å†è§†å›¾ ğŸ“…
â”‚   â””â”€ æ—¥æœŸè¯¦æƒ…
â”‚
â”œâ”€ Tab 3: ç•ªèŒ„é’Ÿ ğŸ…
â”‚   â”œâ”€ è®¡æ—¶å™¨ç•Œé¢
â”‚   â”œâ”€ é€‰æ‹©ä»»åŠ¡
â”‚   â”œâ”€ ç•ªèŒ„é’Ÿè®¾ç½®
â”‚   â””â”€ å†å²è®°å½•
â”‚
â”œâ”€ Tab 4: ç»Ÿè®¡åˆ†æ ğŸ“Š
â”‚   â”œâ”€ å¾…åŠå®Œæˆç»Ÿè®¡
â”‚   â”œâ”€ ç•ªèŒ„é’Ÿç»Ÿè®¡
â”‚   â””â”€ è¶‹åŠ¿å›¾è¡¨
â”‚
â””â”€ Tab 5: æˆ‘çš„ ğŸ‘¤
    â”œâ”€ ä¸ªäººèµ„æ–™
    â”œâ”€ åˆ†ç±»ç®¡ç†
    â”œâ”€ è®¾ç½®
    â”‚   â”œâ”€ é€šçŸ¥è®¾ç½®
    â”‚   â”œâ”€ ç•ªèŒ„é’Ÿè®¾ç½®
    â”‚   â”œâ”€ Widget è®¾ç½®
    â”‚   â””â”€ ä¸»é¢˜è®¾ç½®
    â””â”€ å…³äº

Widgetï¼ˆæ¡Œé¢å°ç»„ä»¶ï¼‰
â”œâ”€ å°å·ï¼šä»Šæ—¥å¾…åŠæ‘˜è¦
â”œâ”€ ä¸­å·ï¼šå¾…åŠåˆ—è¡¨ï¼ˆ3æ¡ï¼‰
â””â”€ å¤§å·ï¼šå®Œæ•´è§†å›¾ + ç•ªèŒ„é’Ÿç»Ÿè®¡
```

---

## æŠ€æœ¯æ¶æ„

### MVVM æ¶æ„
```
View (SwiftUI)
  â†“ â†‘
ViewModel (@Observable)
  â†“ â†‘
Model (SwiftData)
  â†“ â†‘
Repository (æ•°æ®è®¿é—®å±‚)
```

### ç›®å½•ç»“æ„
```
TodoList/
â”œâ”€â”€ App/
â”‚   â”œâ”€â”€ TodoListApp.swift        # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ ContentView.swift        # æ ¹è§†å›¾ï¼ˆTabViewï¼‰
â”‚   â””â”€â”€ MainTabView.swift        # ä¸» Tab è§†å›¾
â”‚
â”œâ”€â”€ Models/                      # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ User.swift
â”‚   â”œâ”€â”€ TodoItem.swift
â”‚   â”œâ”€â”€ Category.swift
â”‚   â”œâ”€â”€ Subtask.swift
â”‚   â”œâ”€â”€ PomodoroSession.swift   # ç•ªèŒ„é’Ÿä¼šè¯
â”‚   â””â”€â”€ PomodoroSettings.swift  # ç•ªèŒ„é’Ÿè®¾ç½®
â”‚
â”œâ”€â”€ ViewModels/                  # è§†å›¾æ¨¡å‹
â”‚   â”œâ”€â”€ AuthViewModel.swift
â”‚   â”œâ”€â”€ TodoViewModel.swift
â”‚   â”œâ”€â”€ CalendarViewModel.swift
â”‚   â”œâ”€â”€ PomodoroViewModel.swift  # ç•ªèŒ„é’Ÿ
â”‚   â”œâ”€â”€ StatisticsViewModel.swift # ç»Ÿè®¡
â”‚   â””â”€â”€ SettingsViewModel.swift
â”‚
â”œâ”€â”€ Views/                       # è§†å›¾
â”‚   â”œâ”€â”€ Auth/                   # è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ LoginView.swift
â”‚   â”‚   â”œâ”€â”€ RegisterView.swift
â”‚   â”‚   â””â”€â”€ Components/
â”‚   â”‚       â””â”€â”€ SocialLoginButton.swift  # ç¬¬ä¸‰æ–¹ç™»å½•æŒ‰é’®ï¼ˆé¢„ç•™ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ Todo/                   # å¾…åŠç›¸å…³
â”‚   â”‚   â”œâ”€â”€ TodoListView.swift
â”‚   â”‚   â”œâ”€â”€ TodoDetailView.swift
â”‚   â”‚   â”œâ”€â”€ CreateTodoView.swift
â”‚   â”‚   â”œâ”€â”€ EditTodoView.swift
â”‚   â”‚   â””â”€â”€ Components/
â”‚   â”‚       â”œâ”€â”€ TodoRowView.swift
â”‚   â”‚       â”œâ”€â”€ TodoFilterBar.swift
â”‚   â”‚       â”œâ”€â”€ CategoryPickerView.swift
â”‚   â”‚       â””â”€â”€ PriorityPickerView.swift
â”‚   â”‚
â”‚   â”œâ”€â”€ Calendar/               # æ—¥å†ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ CalendarView.swift
â”‚   â”‚   â”œâ”€â”€ DayDetailView.swift
â”‚   â”‚   â””â”€â”€ Components/
â”‚   â”‚       â”œâ”€â”€ MonthView.swift
â”‚   â”‚       â””â”€â”€ DayCell.swift
â”‚   â”‚
â”‚   â”œâ”€â”€ Pomodoro/              # ç•ªèŒ„é’Ÿç›¸å…³
â”‚   â”‚   â”œâ”€â”€ PomodoroTimerView.swift
â”‚   â”‚   â”œâ”€â”€ PomodoroSettingsView.swift
â”‚   â”‚   â”œâ”€â”€ SelectTaskView.swift
â”‚   â”‚   â”œâ”€â”€ PomodoroHistoryView.swift
â”‚   â”‚   â””â”€â”€ Components/
â”‚   â”‚       â”œâ”€â”€ CircularProgressView.swift
â”‚   â”‚       â””â”€â”€ TimerControlsView.swift
â”‚   â”‚
â”‚   â”œâ”€â”€ Statistics/            # ç»Ÿè®¡åˆ†æ
â”‚   â”‚   â”œâ”€â”€ StatisticsView.swift
â”‚   â”‚   â”œâ”€â”€ TodoStatsView.swift
â”‚   â”‚   â”œâ”€â”€ PomodoroStatsView.swift
â”‚   â”‚   â””â”€â”€ Components/
â”‚   â”‚       â”œâ”€â”€ ChartView.swift
â”‚   â”‚       â””â”€â”€ ProgressRingView.swift
â”‚   â”‚
â”‚   â””â”€â”€ Profile/               # ä¸ªäººä¸­å¿ƒ
â”‚       â”œâ”€â”€ ProfileView.swift
â”‚       â”œâ”€â”€ SettingsView.swift
â”‚       â”œâ”€â”€ CategoryManageView.swift
â”‚       â”œâ”€â”€ NotificationSettingsView.swift
â”‚       â””â”€â”€ AboutView.swift
â”‚
â”œâ”€â”€ Widget/                     # Widget æ‰©å±•
â”‚   â”œâ”€â”€ TodoWidget.swift
â”‚   â”œâ”€â”€ TodoWidgetBundle.swift
â”‚   â”œâ”€â”€ TodoWidgetProvider.swift
â”‚   â”œâ”€â”€ TodoWidgetEntryView.swift
â”‚   â””â”€â”€ AppIntent/
â”‚       â””â”€â”€ ToggleTodoIntent.swift
â”‚
â”œâ”€â”€ Services/                   # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ DataManager.swift       # SwiftData ç®¡ç†
â”‚   â”œâ”€â”€ KeychainManager.swift   # Keychain ç®¡ç†
â”‚   â”œâ”€â”€ NotificationManager.swift # é€šçŸ¥ç®¡ç†
â”‚   â”œâ”€â”€ PomodoroTimer.swift     # ç•ªèŒ„é’Ÿè®¡æ—¶å™¨
â”‚   â”œâ”€â”€ WidgetDataProvider.swift # Widget æ•°æ®æä¾›
â”‚   â””â”€â”€ ThirdPartyAuth.swift    # ç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆé¢„ç•™ï¼‰
â”‚
â”œâ”€â”€ Utils/                      # å·¥å…·ç±»
â”‚   â”œâ”€â”€ Extensions/
â”‚   â”‚   â”œâ”€â”€ Date+Extension.swift
â”‚   â”‚   â”œâ”€â”€ String+Extension.swift
â”‚   â”‚   â”œâ”€â”€ Color+Extension.swift
â”‚   â”‚   â””â”€â”€ View+Extension.swift
â”‚   â”‚
â”‚   â”œâ”€â”€ Constants.swift         # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ Validators.swift        # éªŒè¯å·¥å…·
â”‚   â””â”€â”€ HapticManager.swift     # è§¦è§‰åé¦ˆ
â”‚
â””â”€â”€ Resources/                  # èµ„æºæ–‡ä»¶
    â”œâ”€â”€ Assets.xcassets
    â”œâ”€â”€ Sounds/                # ç•ªèŒ„é’ŸéŸ³æ•ˆ
    â”‚   â”œâ”€â”€ work_complete.mp3
    â”‚   â””â”€â”€ break_complete.mp3
    â””â”€â”€ Localizable.strings    # å¤šè¯­è¨€æ”¯æŒï¼ˆå¯é€‰ï¼‰
```

---

## å¼€å‘é˜¶æ®µè§„åˆ’

### Phase 1: åŸºç¡€æ­å»ºï¼ˆç¬¬1-2å¤©ï¼‰
- [x] åˆ›å»ºé¡¹ç›®ç»“æ„
- [ ] æ­å»º SwiftData æ•°æ®æ¨¡å‹
- [ ] å®ç°åŸºç¡€å¯¼èˆªç»“æ„
- [ ] è®¾è®¡ UI ç»„ä»¶åº“

### Phase 2: ç”¨æˆ·è®¤è¯ï¼ˆç¬¬3-4å¤©ï¼‰
- [ ] å®ç°ç™»å½•é¡µé¢
- [ ] å®ç°æ³¨å†Œé¡µé¢
- [ ] é›†æˆ Keychain å­˜å‚¨
- [ ] å®ç°ç™»å½•çŠ¶æ€ç®¡ç†

### Phase 3: å¾…åŠåŠŸèƒ½ï¼ˆç¬¬5-7å¤©ï¼‰
- [ ] å®ç°å¾…åŠåˆ—è¡¨è§†å›¾
- [ ] å®ç°åˆ›å»º/ç¼–è¾‘å¾…åŠ
- [ ] å®ç°åˆ†ç±»ç®¡ç†
- [ ] å®ç°ç­›é€‰å’Œæœç´¢

### Phase 4: æ—¥å†åŠŸèƒ½ï¼ˆç¬¬8-9å¤©ï¼‰
- [ ] å®ç°æœˆå†è§†å›¾
- [ ] å®ç°æ—¥æœŸè¯¦æƒ…
- [ ] é›†æˆå¾…åŠä¸æ—¥å†

### Phase 5: é«˜çº§åŠŸèƒ½ï¼ˆç¬¬10-12å¤©ï¼‰
- [ ] å®ç°ç»Ÿè®¡åˆ†æ
- [ ] å®ç°æœ¬åœ°é€šçŸ¥
- [ ] å®ç°è®¾ç½®é¡µé¢
- [ ] ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

### Phase 6: æµ‹è¯•å’Œä¼˜åŒ–ï¼ˆç¬¬13-14å¤©ï¼‰
- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] UI/UX ä¼˜åŒ–
- [ ] Bug ä¿®å¤

---

## éåŠŸèƒ½æ€§éœ€æ±‚

### æ€§èƒ½è¦æ±‚
- åº”ç”¨å¯åŠ¨æ—¶é—´ < 2ç§’
- åˆ—è¡¨æ»šåŠ¨æµç•…ï¼ˆ60fpsï¼‰
- æ•°æ®åŠ è½½å»¶è¿Ÿ < 100ms

### å…¼å®¹æ€§
- iOS 17.0+
- iPhone é€‚é…
- iPad é€‚é…ï¼ˆå¯é€‰ï¼‰
- æ”¯æŒæ·±è‰²æ¨¡å¼

### å®‰å…¨æ€§
- å¯†ç åŠ å¯†å­˜å‚¨ï¼ˆBCrypt/SHA256ï¼‰
- æ•æ„Ÿæ•°æ®ä½¿ç”¨ Keychain
- æœ¬åœ°æ•°æ®åŠ å¯†

### å¯ç”¨æ€§
- ç›´è§‚çš„ç”¨æˆ·ç•Œé¢
- æ¸…æ™°çš„æ“ä½œåé¦ˆ
- æ”¯æŒ VoiceOverï¼ˆæ— éšœç¢ï¼‰

---

## éœ€æ±‚ç¡®è®¤ï¼ˆå·²ç¡®å®šï¼‰

1. **äº‘åŒæ­¥ï¼š** âŒ ä¸éœ€è¦ï¼Œçº¯æœ¬åœ°å­˜å‚¨
2. **å›¢é˜Ÿåä½œï¼š** âŒ ä¸éœ€è¦
3. **ç•ªèŒ„é’ŸåŠŸèƒ½ï¼š** âœ… éœ€è¦å®ç°
4. **å¾®ä¿¡ç™»å½•ï¼š** ğŸ”¶ é¢„ç•™æ¥å£ï¼Œæš‚ä¸å®ç°
5. **Widget å°ç»„ä»¶ï¼š** âœ… éœ€è¦å®ç°
6. **iPad é€‚é…ï¼š** âœ… éœ€è¦å®ç°

---

## ä¸‹ä¸€æ­¥

è¯·ç¡®è®¤ä»¥ä¸Šéœ€æ±‚ï¼Œæˆ‘ä»¬å°†å¼€å§‹ï¼š
1. åˆ›å»ºé¡¹ç›®åŸºç¡€ç»“æ„
2. å®ç°æ•°æ®æ¨¡å‹
3. æ­å»ºè®¤è¯ç³»ç»Ÿ

ä½ æœ‰ä»€ä¹ˆéœ€è¦è°ƒæ•´æˆ–è¡¥å……çš„å—ï¼Ÿ
